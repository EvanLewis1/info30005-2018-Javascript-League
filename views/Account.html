<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Account</title>
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/Account.css">
    <link rel="stylesheet" href="../styles/bootstrap.min.css">
    <link rel="stylesheet" href="../styles/style-for-head.css">
    <link rel="stylesheet" href="../styles/bootstrap-theme.css" media = "screen">
    <script src="./Cookies.js"></script>
</head>

<body>
<script src = nav.js></script>
<header id="head" class="secondary">
    <div class="container">
        <h1>User-Account</h1>
    </div>
</header>

<div class ="leftcolumn">
    <aside>
    <ul>
        <li ><a href="#" class = "active">Personal Information</a></li>
        <li><a href="My_post.html">My post</a></li>
        <li ><a href="Account-setting.html" >Setting</a></li>
    </ul>
    </aside>
</div>

<div class = rightcolumn>
    <section>
        <ul>
            <li><span>Email:</span> <span id = "email"> Email</span></li>
            <li><span>First Name:</span> <span id ="firstName"> firstName</span></li>
            <li><span>Last Name:</span> <span id ="lastName"> lastName</span></li>
            <li><span>Phone Number:</span> <span id ="phoneNumber"> phone</span></li>
            <li><span>Address:</span> <span id ="address"> address</span></li>
        </ul>
    </section>
</div>


<script>
    var data;
    var id = getCookie("username");
    console.log("UserId: ",id);
    if (id == ""){
        window.location.href = "Login.html";
        alert("Please Login first");
    }
    //var UserEmail = "Tia.Kessler@hotmail.com";
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            data = this.responseText;
            console.log(data);
            data = JSON.parse(data);
            console.log(data);
            document.getElementById("email").innerHTML = data.email;
            document.getElementById("firstName").innerHTML = data.firstname;
            document.getElementById("lastName").innerHTML = data.lastname;
            document.getElementById("phoneNumber").innerHTML = data.phone;
            document.getElementById("address").innerHTML = data.address;
        }
    };
    xhttp.open("GET", "/api/id/"+getCookie("username"), true);
    xhttp.send();
    console.log('data',data.email);
    function getUserId(){
        var ID = window.location.search;
        console.log("id=",ID.length);
        console.log("id=",ID);
        ID = ID.substring(1, ID.length)
        console.log("id=",ID.length);
        console.log("id=",ID);
        ID = ID.split("=")[1];
        console.log("id=",ID.length);
        console.log("id=",ID);
        return ID
    }
</script>

</body>
</html>